# 📤 독려 메시지 개선 아이디어

## 현재 상태
- 서류 미제출 학생 전체에게 일괄 발송
- 모든 학생에게 동일한 메시지

## 개선 아이디어

### 1️⃣ 맞춤형 독려 메시지 (★★★ 추천)

**개념**: 출결 상황과 기간에 따라 다른 메시지 발송

**예시**:
- **질병결석** → "안녕하세요 {이름} 학생! 병원 진단서를 제출해주세요."
- **출석인정결석** → "안녕하세요 {이름} 학생! 현장체험학습 확인서를 제출해주세요."
- **반복 미제출**(3회 이상) → "⚠️ {이름} 학생, 서류 미제출이 반복되고 있습니다. 빠른 제출 부탁드립니다."

**구현 방법**:
```python
def get_reminder_message_template(attendance_record, reminder_count):
    if attendance_record.attendance_reason == "질병":
        return f"{student.name} 학생, 병원 진단서 제출을 부탁드립니다."
    elif attendance_record.attendance_reason == "출석인정":
        return f"{student.name} 학생, 체험학습 확인서 제출을 부탁드립니다."
    elif reminder_count >= 3:
        return f"⚠️ {student.name} 학생, 서류 미제출이 반복되고 있습니다."
    else:
        return f"{student.name} 학생, 서류 제출을 부탁드립니다."
```

---

### 2️⃣ 개별/선택적 발송 (★★★ 추천)

**개념**: 대시보드에서 특정 학생만 선택하여 독려 메시지 발송

**UI 예시**:
- 각 학생 셀에 "📤 독려" 버튼 추가
- 체크박스로 여러 학생 선택 후 일괄 발송
- "서류 미제출 학생만 선택" 필터 버튼

**장점**:
- 교사가 상황에 맞게 유연하게 대응
- 불필요한 메시지 발송 방지

---

### 3️⃣ 단계별 독려 시스템 (★★)

**개념**: 시간 경과에 따라 독려 강도 증가

**단계**:
1. **1차 독려** (당일): "안내" 수준의 부드러운 메시지
2. **2차 독려** (3일 후): "상기" 수준의 주의 메시지
3. **3차 독려** (7일 후): "경고" 수준의 강한 메시지
4. **최종 독려** (14일 후): 학부모 연락 + 교사 직접 연락

**메시지 예시**:
```
[1차] 📝 {이름} 학생, 서류 제출을 잊지 마세요!

[2차] ⚠️ {이름} 학생, 아직 서류가 제출되지 않았습니다.
       빠른 시일 내에 제출 부탁드립니다.

[3차] 🚨 {이름} 학생, 서류 미제출로 인해 출결 처리가
       지연되고 있습니다. 즉시 제출해주세요.
```

---

### 4️⃣ 날짜/기간 기반 발송 (★★)

**개념**: 특정 조건에 해당하는 학생에게만 발송

**조건 예시**:
- 이번 주 미제출 학생
- 이번 달 미제출 학생
- 특정 날짜 범위 (예: 11/1~11/15)
- 마감일 임박 (예: 제출 기한 3일 전)

**UI**:
```
┌─────────────────────────────┐
│ 독려 메시지 발송 조건       │
├─────────────────────────────┤
│ □ 이번 주 미제출            │
│ ☑ 이번 달 미제출            │
│ □ 마감일 3일 이내           │
│                             │
│ [발송] [취소]               │
└─────────────────────────────┘
```

---

### 5️⃣ 메시지 템플릿 커스터마이징 (★)

**개념**: 교사가 직접 메시지 내용을 작성하거나 템플릿 선택

**기능**:
- 템플릿 저장/불러오기
- 변수 사용 가능 (`{이름}`, `{날짜}`, `{서류종류}`)
- 말투 선택 (부드러움/보통/강함)

**UI 예시**:
```
┌─────────────────────────────────────────┐
│ 메시지 작성                             │
├─────────────────────────────────────────┤
│ 템플릿: [기본 안내] ▼                   │
│                                         │
│ {이름} 학생 안녕하세요!                 │
│ {날짜}자 {서류종류} 제출을 부탁드립니다.│
│                                         │
│ 사용 가능 변수:                         │
│ {이름} {날짜} {서류종류} {출결타입}     │
└─────────────────────────────────────────┘
```

---

### 6️⃣ 학부모/학생 구분 발송 (★)

**개념**: 학생과 학부모에게 각각 다른 톤의 메시지

**예시**:
- **학생용**: "길동아, 진단서 제출 잊지 마!😊"
- **학부모용**: "학부모님, 홍길동 학생의 병원 진단서 제출을 부탁드립니다."

**데이터베이스 수정 필요**:
- Student 테이블에 `parent_telegram_id` 추가
- 발송 시 학생/학부모 선택 옵션

---

### 7️⃣ 통계 및 추적 기능 (★)

**개념**: 독려 메시지 발송 이력 및 효과 분석

**기능**:
- 독려 메시지 발송 이력 조회
- 발송 후 제출률 통계
- 응답률 추적
- 미응답 학생 자동 리마인더

**대시보드 추가**:
```
┌─────────────────────────────────────┐
│ 📊 독려 메시지 통계                 │
├─────────────────────────────────────┤
│ 이번 달 발송: 15건                  │
│ 제출 완료: 10건 (66.7%)             │
│ 미제출: 5건                         │
│                                     │
│ 평균 제출 소요일: 2.3일             │
└─────────────────────────────────────┘
```

---

## 우선순위 추천

### ⭐ 즉시 구현 추천
1. **맞춤형 독려 메시지** (출결 사유별 다른 메시지)
2. **개별 발송 기능** (특정 학생 선택 가능)

### ⭐⭐ 중기 구현 추천
3. **단계별 독려 시스템** (반복 미제출 관리)
4. **날짜/기간 기반 발송** (필터 기능)

### ⭐⭐⭐ 장기 구현 추천
5. **메시지 템플릿 커스터마이징**
6. **학부모/학생 구분 발송**
7. **통계 및 추적 기능**

---

## 구현 난이도

| 기능 | 난이도 | 예상 시간 |
|------|--------|----------|
| 맞춤형 메시지 | ⭐ 쉬움 | 30분 |
| 개별 발송 | ⭐ 쉬움 | 1시간 |
| 단계별 독려 | ⭐⭐ 보통 | 2시간 |
| 날짜 기반 발송 | ⭐⭐ 보통 | 1.5시간 |
| 템플릿 커스터마이징 | ⭐⭐⭐ 어려움 | 3시간 |
| 학부모 구분 | ⭐⭐ 보통 | 2시간 |
| 통계 기능 | ⭐⭐⭐ 어려움 | 4시간 |

---

## 어떤 기능부터 구현할까요?

가장 효과적인 조합:
**맞춤형 메시지 + 개별 발송** → 교사가 유연하게 사용 가능!
